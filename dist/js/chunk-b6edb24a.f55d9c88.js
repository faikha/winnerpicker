(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6edb24a"],{"49c5":function(t,e,i){"use strict";i("b7e5")},b7e5:function(t,e,i){},bb51:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main container"},[i("WinnerPicker")],1)},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("link",{attrs:{href:"https://fonts.googleapis.com/css?family="+t.family.css,rel:"stylesheet"}}),i("div",{staticClass:"pt-5",style:{color:t.fontColor,fontFamily:t.family.name}},[i("div",{staticClass:"grid h-40 text-center"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.hideTitleState,expression:"!hideTitleState"}],staticClass:"transform ",class:t.titleFontSize.class,style:"--tw-translate-y:"+t.position.titleY+"rem"},[t._v(t._s(t.title))])]),i("div",{staticClass:"flex"},[i("div",{staticClass:"flex-1 text-center"},[i("div",{staticClass:"transform",style:"--tw-translate-y:"+t.position.prizesY+"rem; --tw-translate-x:"+t.position.prizesX+"rem; "},[i("img",{staticClass:"max-h-64 m-auto mb-8",attrs:{src:t.prizeImage}}),t.prizeDescription?i("div",{},[i("div",{staticClass:"text-xl"},[t._v(t._s(t.prizeUnits)+" "+t._s(t.unitPrize))])]):t._e()])]),i("div",{staticClass:"flex-1 pt-28 text-center",style:{color:t.fontColor}},[i("div",{staticClass:"transform",style:"--tw-translate-y:"+t.position.rollerY+"rem; --tw-translate-x:"+t.position.rollerX+"rem; "},[t.name?i("div",[i("div",{staticClass:"text-5xl"},[t._v(t._s(t.splitedStr[0]))]),i("div",{staticClass:"text-2xl"},[t._v(t._s(t.splitedStr[1]))])]):t._e(),t.name?t._e():i("div",{staticClass:"text-4xl"},[t._v("...")])])]),i("div",{staticClass:"flex-1"},[i("div",{staticClass:"transform scrolthis",style:"--tw-translate-y:"+t.position.winnersY+"rem; --tw-translate-x:"+t.position.winnersX+"rem; "},[i("div",{staticClass:"ml-24"},[t._v("LIST PEMENANG :")]),t._l(t.winnerlist,(function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.winners.length,expression:"winners.length"}],key:s,staticClass:"ml-24",class:[t.winnersFontSize.class]},[i("span",{staticClass:"text-xl"},[t._v(t._s(t.prizes[s].prizeDescription))]),t._l(t.winnerlist[s].winners,(function(e,s){return i("div",{key:s},[t._v(" "+t._s(s+1)+". "+t._s(e)+" ")])}))],2)}))],2)])]),i("div",{attrs:{id:"action"}},[i("button",{directives:[{name:"show",rawName:"v-show",value:!t.hideStartState,expression:"!hideStartState"}],staticClass:"btn btn-start start",on:{click:t.start}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.startState,expression:"!startState"}]},[t._v("Start")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.startState,expression:"startState"}]},[t._v("Again")])]),i("button",{directives:[{name:"show",rawName:"v-show",value:!t.hidePickerState,expression:"!hidePickerState"}],staticClass:"btn btn-stop stop",on:{click:t.stop}},[t._v(" Pick winner")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!t.hideNextPrize,expression:"!hideNextPrize"}],staticClass:"btn next",on:{click:t.nextPrize}},[t._v(" Next Prize")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!t.hideDownloadState,expression:"!hideDownloadState"}],staticClass:"btn btn-start",on:{click:t.download}},[t._v(" Download")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!t.hidePickAllWinner,expression:"!hidePickAllWinner"}],staticClass:"btn",on:{click:t.pickAllWinner}},[t._v("PickAllWinner")]),i("button",{staticClass:"btn btn-reset",on:{click:t.reset}},[t._v("Reset")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],attrs:{id:"message"}},[t._v(t._s(t.message))])])])])},a=[];Array.prototype.sum=function(t){for(var e=0,i=0,s=this.length;i<s;i++)e+=parseInt(this[i][t]);return e};var o={name:"WinnerPicker",components:{},data:function(){return{url:"",title:"",fontColor:"",titleFontSize:{},position:null,prizesFontSize:{},winnersFontSize:{},family:{},allPrizes:[],prizes:[],prizeImage:"",prizeUnits:"",unitPrize:"",prizeDescription:"",typeShowContestant:"",contestants:[],contestantList:[],remainingContestants:[],listIndex:[],prizeIndex:[],message:null,name:null,nameIndex:0,interval:null,startState:!1,stopState:!1,hideStartState:!1,hidePickerState:!0,hideDownloadState:!0,hideNextPrize:!0,hidePickAllWinner:!1,hideTitleState:!1,useConfetti:!0,useStopSound:!0,winners:[],winnerlist:[{winners:[]}],allWinners:[],count:0,textClass:"text-white",spinningSound:{file:new Audio("/spinning.mp3"),isPlaying:!1},winningSound:{file:new Audio("/winning.mp3"),isPlaying:!1}}},created(){this.getSetting()},methods:{playSound(t){t.isPlaying=!0,t.file.play()},stopSound(t){t.isPlaying=!0,t.file.pause()},start:function(){if(this.hideStartState=!0,this.hidePickerState=!1,this.hidePickAllWinner=!0,this.winners.length<this.prizes.sum("prizeUnits")){if(!this._isFilled()||this.startState)return;let t=parseInt(this.prizes[this.count].prizeUnits);this.winnerlist[this.count].winners.length==t&&(t+=parseInt(this.winners.length),this.winnerlist.push({winners:[]})),this.winners.length==this.prizes.sum("prizeUnits")-1&&(this.hideStartState=!0),this.startState=!0,this.stopState=!1;let e=0;e=this.getRandomInt(0,this.contestantList.length-1),this.playSound(this.spinningSound),this.interval=setInterval(()=>{this.name=this.contestantList[e],this.splitedStr=this.name.split(","),this.nameIndex=e,this.contestantList.length-1==e?e=0:e++},10*this.getRandomInt(5,10))}},stop:function(){if(!this._isFilled())return;this.hidePickerState=!0,this.hideStartState=!1,this.winners.length==this.prizes.sum("prizeUnits")-1&&(this.hideNextPrize=!0,this.hideStartState=!0,this.hideDownloadState=!1),this.interval=clearInterval(this.interval),this.useStopSound&&(this.stopSound(this.spinningSound),this.playSound(this.winningSound)),this.startState&&(this.winners.push(this.name),this.winnerlist[this.count].winners.push(this.name),this.contestantList.splice(this.nameIndex,1));let t=parseInt(this.prizes[this.count].prizeUnits);this.winnerlist[this.count].winners.length==t&&(this.hideStartState=!0,this.hideNextPrize=!1,t+=parseInt(this.winners.length)),this.winners.length-1==this.prizes.sum("prizeUnits")-1&&(this.hideNextPrize=!0),this.useConfetti&&(this.$confetti.start(),setTimeout(()=>{this.$confetti.stop()},3e3)),console.log(this.winnerlist),this.startState=!1,this.stopState=!0},nextPrize:function(){this.hideNextPrize=!0,this.hideStartState=!1,this.name=null,this.count++,this.prizeImage=this.prizes[this.count].prizeImage,this.prizeUnits=this.prizes[this.count].prizeUnits,""!==this.prizes[this.count].unitPrize?this.unitPrize=this.prizes[this.count].unitPrize:this.unitPrize="Unit",this.prizeDescription=this.prizes[this.count].prizeDescription,this.winnerlist.push({winners:[]})},reset:function(){this.name=null,this.message=null,this.winners=[],this.winnerlist=[{winners:[]}],this.startState=!1,this.stopState=!1,this.hideStartState=!1,this.hidePickerState=!0,this.hideNextPrize=!0,this.hideDownloadState=!0,this.hidePickAllWinner=!1,this.getSetting(),this.interval=clearInterval(this.interval)},getSetting(){if(null!==localStorage.getItem("setting")){let t=JSON.parse(localStorage.getItem("setting"));this.title=t.title,this.position=t.position,this.fontColor=t.fontColor,this.family=t.family,this.prizes=t.rollPrizes,this.allPrizes=t.prizes,this.url=t.url,this.backgroundImage=t.backgroundImage,this.prizeImage=this.prizes[0].prizeImage,this.prizeUnits=this.prizes[0].prizeUnits,this.unitPrize=this.prizes[0].unitPrize,this.prizeDescription=t.prizes[0].prizeDescription,this.titleFontSize=t.titleFontSize,this.prizesFontSize=t.prizesFontSize,this.winnersFontSize=t.winnersFontSize,this.prizeIndex=t.prizeIndex,"true"==t.hideTitleState?this.hideTitleState=!0:this.hideTitleState=!1,console.log(this.hideTitleState),this.backgroundImage&&(document.body.style.backgroundImage=`url(${this.backgroundImage})`),"external"===t.typeSource?this.getSourceJson():(this.contestantList=t.contestantList,this.contestants=t.contestants,this.listIndex=t.listIndex)}else this.$router.push("setting")},removeWinner:function(){var t=[];for(let i=0;i<this.winnerlist.length;i++){var e=this.winnerlist[i].winners;for(let i=0;i<e.length;i++)t=[...t,e[i]]}this.allWinners=t;for(let i=0;i<this.contestants.length;i++){const e=this.contestants[i].list.split("\n");this.remainingContestants[i]=e.filter((function(e){return-1===t.indexOf(e)})),this.remainingContestants[i]=this.remainingContestants[i].join("\n")}for(let i=0;i<this.remainingContestants.length;i++)this.contestants[i].list=this.remainingContestants[i];console.log(this.remainingContestants)},resetStorageItem:function(){this.removeWinner(),localStorage.setItem("setting",JSON.stringify({url:this.url,title:this.title,position:this.position,fontColor:this.fontColor,family:this.family,contestantList:this.contestantList,contestants:this.contestants,listIndex:this.listIndex,typeShowContestant:this.typeShowContestant,prizes:this.allPrizes,prizeIndex:this.prizeIndex,backgroundImage:this.backgroundImage,hideTitleState:this.hideTitleState,titleFontSize:this.titleFontSize,prizesFontSize:this.prizesFontSize,rollerFontSize:this.rollerFontSize,winnersFontSize:this.winnersFontSize}))},sleep:function(t){return new Promise(e=>setTimeout(e,t))},pickAllWinner:async function(){const t=document.querySelector(".start"),e=document.querySelector(".stop"),i=document.querySelector(".next");this.useConfetti=!1,this.useStopSound=!1;for(let s=0;s<this.prizes.length;s++){0!=s&&s<this.prizes.length&&(await this.sleep(5e3),i.click(),console.log("next"));for(let i=0;i<this.prizes[s].prizeUnits;i++)t.click(),await this.sleep(500),console.log("start click"),i==this.prizes[s].prizeUnits-1?(this.useStopSound=!0,this.useConfetti=!0):(this.useStopSound=!1,this.useConfetti=!1),e.click(),console.log("stop click")}},download:function(){let t="";t+="The Winner of "+this.titleCase(this.title)+"\n";for(let i=0;i<this.winnerlist.length;i++){t+=this.prizes[i].prizeUnits+" Units "+this.prizes[i].prizeDescription,t+="\n";for(let e=0;e<this.winnerlist[i].winners.length;e++)t+=e+1+". "+this.winnerlist[i].winners[e],t+="\n";t+="\n"}t+="\n",t+="This file is generated at "+Date(),console.log(t);let e=new Blob([t],{type:"text/plain;charset=utf-8"});saveAs(e,"data.txt"),this.resetStorageItem()},titleCase:function(t){return t.toLowerCase().split(" ").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" ")},getRandomInt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},async getSourceJson(){await fetch(this.url).then(t=>t.json()).then(t=>this.contestantList=t.map(t=>t.name)).catch(t=>this.message=t)},_isFilled:function(){return this.contestantList.length?1==this.contestantList.length?(this.message="Contestants must be more then one!",!1):(this.message=null,!0):(this.message="List of contestantList is empty!",!1)}}},l=o,h=(i("49c5"),i("2877")),c=Object(h["a"])(l,r,a,!1,null,"86869d4e",null),p=c.exports,u={name:"Home",components:{WinnerPicker:p}},d=u,m=Object(h["a"])(d,s,n,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-b6edb24a.f55d9c88.js.map